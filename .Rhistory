group_by(family) %>%
mutate(rank_in_family = row_number()) %>%
ungroup()
#Nonsense lives here!
birds_prevalence_USA <- birds_prevalence_USA %>%
mutate(not_in_usa = abundance_estimate_ebird < 0.0045) %>%
mutate(large_cluster_tail = ((rank_in_order >= 30) | (rank_in_family >=5))) %>%
mutate(rare_but_common_by_family = ((large_cluster_tail & (rank_in_family <= 2)))) %>%
mutate(rare_but_common_by_order = ((large_cluster_tail & (rank_in_order <= 2)))) %>%
mutate(too_many_sparrows = large_cluster_tail & !rare_but_common_by_order & !rare_but_common_by_family) %>%
mutate(rare_on_both = (abundance_estimate_ebird < median(abundance_estimate_ebird)) & (abundance_estimate_pnas < median(abundance_estimate_pnas)))
View(filter(birds_prevalence_USA, too_many_sparrows))
library(knitr)
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning =FALSE)
library(here)
library(tidyverse)
birds_ebird <- read_csv(paste0(here(), '/data_ebird/all-stats-regional-2021.csv'))
birds_pnas <- read_csv(paste0(here(), '/data_ebird/pnas.2023170118.sd01.csv'))
bird_e1 <- read_tsv(paste0(here(), '/e1_party-quiz/bird_key.tsv'))
birds_in_USA <- birds_ebird %>%
filter(region_code == "USA") %>%
mutate(normalized_sci_name = tolower(str_remove(scientific_name, " "))) %>%
select(common_name, species_code, normalized_sci_name, abundance_mean, season_name) %>%
group_by(species_code) %>%
summarize(first_abundance = first(abundance_mean), sum_abundance_mean = sum(abundance_mean, na.rm = TRUE), normalized_sci_name = first(normalized_sci_name), common_name = first(common_name), year_present = any(season_name == "year_round")) %>%
ungroup()
birds_merge <- birds_pnas %>%
mutate(normalized_sci_name = tolower(str_remove(`Scientific name`, " "))) %>%
left_join(birds_in_USA)
birds_prevalence_USA <- birds_merge %>%
filter(!is.na(species_code)) %>%
select("Common name", "Order", "Family", "Abundance estimate", "Scientific name", "normalized_sci_name", "species_code", "sum_abundance_mean") %>%
rename(common_name = `Common name`,
scientific_name = `Scientific name`,
order = Order,
family = Family,
abundance_estimate_pnas = `Abundance estimate`,
abundance_estimate_ebird = sum_abundance_mean) %>%
arrange(desc(abundance_estimate_pnas)) %>%
mutate(rank_overall = row_number()) %>%
group_by(order) %>%
mutate(rank_in_order = row_number()) %>%
ungroup() %>%
group_by(family) %>%
mutate(rank_in_family = row_number()) %>%
ungroup()
#Nonsense lives here!
birds_prevalence_USA <- birds_prevalence_USA %>%
mutate(not_in_usa = abundance_estimate_ebird < 0.0045) %>%
mutate(large_cluster_tail = ((rank_in_order >= 30) | (rank_in_family >=5))) %>%
mutate(rare_but_common_by_family = ((large_cluster_tail & (rank_in_family <= 2)))) %>%
mutate(rare_but_common_by_order = ((large_cluster_tail & (rank_in_order <= 2)))) %>%
mutate(too_many_sparrows = large_cluster_tail & !rare_but_common_by_order & !rare_but_common_by_family) %>%
mutate(rare_on_both = (abundance_estimate_ebird < median(abundance_estimate_ebird)) & (abundance_estimate_pnas < median(abundance_estimate_pnas)))
View(filter(birds_prevalence_USA, too_many_sparrows))
library(knitr)
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning =FALSE)
library(here)
library(tidyverse)
birds_ebird <- read_csv(paste0(here(), '/data_ebird/all-stats-regional-2021.csv'))
birds_pnas <- read_csv(paste0(here(), '/data_ebird/pnas.2023170118.sd01.csv'))
bird_e1 <- read_tsv(paste0(here(), '/e1_party-quiz/bird_key.tsv'))
birds_in_USA <- birds_ebird %>%
filter(region_code == "USA") %>%
mutate(normalized_sci_name = tolower(str_remove(scientific_name, " "))) %>%
select(common_name, species_code, normalized_sci_name, abundance_mean, season_name) %>%
group_by(species_code) %>%
summarize(first_abundance = first(abundance_mean), sum_abundance_mean = sum(abundance_mean, na.rm = TRUE), normalized_sci_name = first(normalized_sci_name), common_name = first(common_name), year_present = any(season_name == "year_round")) %>%
ungroup()
birds_merge <- birds_pnas %>%
mutate(normalized_sci_name = tolower(str_remove(`Scientific name`, " "))) %>%
left_join(birds_in_USA)
birds_prevalence_USA <- birds_merge %>%
filter(!is.na(species_code)) %>%
select("Common name", "Order", "Family", "Abundance estimate", "Scientific name", "normalized_sci_name", "species_code", "sum_abundance_mean") %>%
rename(common_name = `Common name`,
scientific_name = `Scientific name`,
order = Order,
family = Family,
abundance_estimate_pnas = `Abundance estimate`,
abundance_estimate_ebird = sum_abundance_mean) %>%
arrange(desc(abundance_estimate_pnas)) %>%
mutate(rank_overall = row_number()) %>%
group_by(order) %>%
mutate(rank_in_order = row_number()) %>%
ungroup() %>%
group_by(family) %>%
mutate(rank_in_family = row_number()) %>%
ungroup()
#Nonsense lives here!
birds_prevalence_USA <- birds_prevalence_USA %>%
#mutate(not_in_usa = abundance_estimate_ebird < 0.0045) %>%
#mutate(large_cluster_tail = ((rank_in_order >= 30) | (rank_in_family >=5))) %>%
#mutate(rare_but_common_by_family = ((large_cluster_tail & (rank_in_family <= 2)))) %>%
#mutate(rare_but_common_by_order = ((large_cluster_tail & (rank_in_order <= 2)))) %>%
#mutate(too_many_sparrows = large_cluster_tail & !rare_but_common_by_order & !rare_but_common_by_family) %>%
#mutate(rare_on_both = (abundance_estimate_ebird < median(abundance_estimate_ebird)) & (abundance_estimate_pnas < median(abundance_estimate_pnas)))
View(filter(birds_prevalence_USA, too_many_sparrows))
library(knitr)
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning =FALSE)
library(here)
library(tidyverse)
birds_ebird <- read_csv(paste0(here(), '/data_ebird/all-stats-regional-2021.csv'))
birds_pnas <- read_csv(paste0(here(), '/data_ebird/pnas.2023170118.sd01.csv'))
bird_e1 <- read_tsv(paste0(here(), '/e1_party-quiz/bird_key.tsv'))
birds_in_USA <- birds_ebird %>%
filter(region_code == "USA") %>%
mutate(normalized_sci_name = tolower(str_remove(scientific_name, " "))) %>%
select(common_name, species_code, normalized_sci_name, abundance_mean, season_name) %>%
group_by(species_code) %>%
summarize(first_abundance = first(abundance_mean), sum_abundance_mean = sum(abundance_mean, na.rm = TRUE), normalized_sci_name = first(normalized_sci_name), common_name = first(common_name), year_present = any(season_name == "year_round")) %>%
ungroup()
birds_merge <- birds_pnas %>%
mutate(normalized_sci_name = tolower(str_remove(`Scientific name`, " "))) %>%
left_join(birds_in_USA)
birds_prevalence_USA <- birds_merge %>%
filter(!is.na(species_code)) %>%
select("Common name", "Order", "Family", "Abundance estimate", "Scientific name", "normalized_sci_name", "species_code", "sum_abundance_mean") %>%
rename(common_name = `Common name`,
scientific_name = `Scientific name`,
order = Order,
family = Family,
abundance_estimate_pnas = `Abundance estimate`,
abundance_estimate_ebird = sum_abundance_mean) %>%
arrange(desc(abundance_estimate_pnas)) %>%
mutate(rank_overall = row_number()) %>%
group_by(order) %>%
mutate(rank_in_order = row_number()) %>%
ungroup() %>%
group_by(family) %>%
mutate(rank_in_family = row_number()) %>%
ungroup()
#Nonsense lives here!
birds_prevalence_USA <- birds_prevalence_USA %>%
#mutate(not_in_usa = abundance_estimate_ebird < 0.0045) %>%
#mutate(large_cluster_tail = ((rank_in_order >= 30) | (rank_in_family >=5))) %>%
#mutate(rare_but_common_by_family = ((large_cluster_tail & (rank_in_family <= 2)))) %>%
#mutate(rare_but_common_by_order = ((large_cluster_tail & (rank_in_order <= 2)))) %>%
#mutate(too_many_sparrows = large_cluster_tail & !rare_but_common_by_order & !rare_but_common_by_family) %>%
#mutate(rare_on_both = (abundance_estimate_ebird < median(abundance_estimate_ebird)) & (abundance_estimate_pnas < median(abundance_estimate_pnas)))
#View(filter(birds_prevalence_USA, too_many_sparrows))
library(knitr)
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning =FALSE)
library(here)
library(tidyverse)
birds_ebird <- read_csv(paste0(here(), '/data_ebird/all-stats-regional-2021.csv'))
birds_pnas <- read_csv(paste0(here(), '/data_ebird/pnas.2023170118.sd01.csv'))
bird_e1 <- read_tsv(paste0(here(), '/e1_party-quiz/bird_key.tsv'))
birds_in_USA <- birds_ebird %>%
filter(region_code == "USA") %>%
mutate(normalized_sci_name = tolower(str_remove(scientific_name, " "))) %>%
select(common_name, species_code, normalized_sci_name, abundance_mean, season_name) %>%
group_by(species_code) %>%
summarize(first_abundance = first(abundance_mean), sum_abundance_mean = sum(abundance_mean, na.rm = TRUE), normalized_sci_name = first(normalized_sci_name), common_name = first(common_name), year_present = any(season_name == "year_round")) %>%
ungroup()
birds_merge <- birds_pnas %>%
mutate(normalized_sci_name = tolower(str_remove(`Scientific name`, " "))) %>%
left_join(birds_in_USA)
birds_prevalence_USA <- birds_merge %>%
filter(!is.na(species_code)) %>%
select("Common name", "Order", "Family", "Abundance estimate", "Scientific name", "normalized_sci_name", "species_code", "sum_abundance_mean") %>%
rename(common_name = `Common name`,
scientific_name = `Scientific name`,
order = Order,
family = Family,
abundance_estimate_pnas = `Abundance estimate`,
abundance_estimate_ebird = sum_abundance_mean) %>%
arrange(desc(abundance_estimate_pnas)) %>%
mutate(rank_overall = row_number()) %>%
group_by(order) %>%
mutate(rank_in_order = row_number()) %>%
ungroup() %>%
group_by(family) %>%
mutate(rank_in_family = row_number()) %>%
ungroup()
#Nonsense lives here!
#birds_prevalence_USA <- birds_prevalence_USA %>%
#mutate(not_in_usa = abundance_estimate_ebird < 0.0045) %>%
#mutate(large_cluster_tail = ((rank_in_order >= 30) | (rank_in_family >=5))) %>%
#mutate(rare_but_common_by_family = ((large_cluster_tail & (rank_in_family <= 2)))) %>%
#mutate(rare_but_common_by_order = ((large_cluster_tail & (rank_in_order <= 2)))) %>%
#mutate(too_many_sparrows = large_cluster_tail & !rare_but_common_by_order & !rare_but_common_by_family) %>%
#mutate(rare_on_both = (abundance_estimate_ebird < median(abundance_estimate_ebird)) & (abundance_estimate_pnas < median(abundance_estimate_pnas)))
#View(filter(birds_prevalence_USA, too_many_sparrows))
common_birds <- birds_prevalence_USA %>%
#filter(!not_in_usa) %>%
#filter(!too_many_sparrows) %>%
#filter(!rare_on_both) %>%
arrange(rank_overall)
View(common_birds)
write_csv(common_birds, paste0(here(), '/data_ebird/common_birds_in_USA.csv'))
library(knitr)
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning =FALSE)
library(here)
library(tidyverse)
birds_ebird <- read_csv(paste0(here(), '/data_ebird/all-stats-regional-2021.csv'))
birds_pnas <- read_csv(paste0(here(), '/data_ebird/pnas.2023170118.sd01.csv'))
bird_e1 <- read_tsv(paste0(here(), '/e1_party-quiz/bird_key.tsv'))
birds_in_USA <- birds_ebird %>%
filter(region_code == "USA") %>%
mutate(normalized_sci_name = tolower(str_remove(scientific_name, " "))) %>%
select(common_name, species_code, normalized_sci_name, abundance_mean, season_name) %>%
group_by(species_code) %>%
summarize(first_abundance = first(abundance_mean), sum_abundance_mean = sum(abundance_mean, na.rm = TRUE), normalized_sci_name = first(normalized_sci_name), common_name = first(common_name), year_present = any(season_name == "year_round")) %>%
ungroup()
birds_merge <- birds_pnas %>%
mutate(normalized_sci_name = tolower(str_remove(`Scientific name`, " "))) %>%
left_join(birds_in_USA)
birds_prevalence_USA <- birds_merge %>%
filter(!is.na(species_code)) %>%
select("Common name", "Order", "Family", "Abundance estimate", "Scientific name", "normalized_sci_name", "species_code", "sum_abundance_mean") %>%
rename(common_name = `Common name`,
scientific_name = `Scientific name`,
order = Order,
family = Family,
abundance_estimate_pnas = `Abundance estimate`,
abundance_estimate_ebird = sum_abundance_mean) %>%
arrange(desc(abundance_estimate_pnas)) %>%
mutate(rank_overall = row_number()) %>%
group_by(order) %>%
mutate(rank_in_order = row_number()) %>%
ungroup() %>%
group_by(family) %>%
mutate(rank_in_family = row_number()) %>%
ungroup()
#Nonsense lives here!
birds_prevalence_USA <- birds_prevalence_USA %>%
mutate(not_in_usa = abundance_estimate_ebird < 0.0045)
#mutate(large_cluster_tail = ((rank_in_order >= 30) | (rank_in_family >=5))) %>%
#mutate(rare_but_common_by_family = ((large_cluster_tail & (rank_in_family <= 2)))) %>%
#mutate(rare_but_common_by_order = ((large_cluster_tail & (rank_in_order <= 2)))) %>%
#mutate(too_many_sparrows = large_cluster_tail & !rare_but_common_by_order & !rare_but_common_by_family) %>%
#mutate(rare_on_both = (abundance_estimate_ebird < median(abundance_estimate_ebird)) & (abundance_estimate_pnas < median(abundance_estimate_pnas)))
#View(filter(birds_prevalence_USA, too_many_sparrows))
common_birds <- birds_prevalence_USA %>%
#filter(!not_in_usa) %>%
#filter(!too_many_sparrows) %>%
#filter(!rare_on_both) %>%
arrange(rank_overall)
View(common_birds)
write_csv(common_birds, paste0(here(), '/data_ebird/common_birds_in_USA.csv'))
library(knitr)
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning =FALSE)
library(here)
library(tidyverse)
birds_ebird <- read_csv(paste0(here(), '/data_ebird/all-stats-regional-2021.csv'))
birds_pnas <- read_csv(paste0(here(), '/data_ebird/pnas.2023170118.sd01.csv'))
bird_e1 <- read_tsv(paste0(here(), '/e1_party-quiz/bird_key.tsv'))
birds_in_USA <- birds_ebird %>%
filter(region_code == "USA") %>%
mutate(normalized_sci_name = tolower(str_remove(scientific_name, " "))) %>%
select(common_name, species_code, normalized_sci_name, abundance_mean, season_name) %>%
group_by(species_code) %>%
summarize(first_abundance = first(abundance_mean), sum_abundance_mean = sum(abundance_mean, na.rm = TRUE), normalized_sci_name = first(normalized_sci_name), common_name = first(common_name), year_present = any(season_name == "year_round")) %>%
ungroup()
birds_merge <- birds_pnas %>%
mutate(normalized_sci_name = tolower(str_remove(`Scientific name`, " "))) %>%
left_join(birds_in_USA)
birds_prevalence_USA <- birds_merge %>%
filter(!is.na(species_code)) %>%
select("Common name", "Order", "Family", "Abundance estimate", "Scientific name", "normalized_sci_name", "species_code", "sum_abundance_mean") %>%
rename(common_name = `Common name`,
scientific_name = `Scientific name`,
order = Order,
family = Family,
abundance_estimate_pnas = `Abundance estimate`,
abundance_estimate_ebird = sum_abundance_mean) %>%
arrange(desc(abundance_estimate_pnas)) %>%
mutate(rank_overall = row_number()) %>%
group_by(order) %>%
mutate(rank_in_order = row_number()) %>%
ungroup() %>%
group_by(family) %>%
mutate(rank_in_family = row_number()) %>%
ungroup()
#Nonsense lives here!
birds_prevalence_USA <- birds_prevalence_USA %>%
mutate(not_in_usa = abundance_estimate_ebird < 0.0045) %>%
mutate(top_5_in_order = rank_in_order <=5) %>%
mutate(top_200_birds = rank_overall <=200)
#mutate(large_cluster_tail = ((rank_in_order >= 30) | (rank_in_family >=5))) %>%
#mutate(rare_but_common_by_family = ((large_cluster_tail & (rank_in_family <= 2)))) %>%
#mutate(rare_but_common_by_order = ((large_cluster_tail & (rank_in_order <= 2)))) %>%
#mutate(too_many_sparrows = large_cluster_tail & !rare_but_common_by_order & !rare_but_common_by_family) %>%
#mutate(rare_on_both = (abundance_estimate_ebird < median(abundance_estimate_ebird)) & (abundance_estimate_pnas < median(abundance_estimate_pnas)))
#View(filter(birds_prevalence_USA, too_many_sparrows))
common_birds <- birds_prevalence_USA %>%
arrange(rank_overall) %>%
filter(!not_in_usa)%>%
filter(top_200_birds | top_5_in_order)
#View(common_birds)
write_csv(common_birds, paste0(here(), '/data_ebird/common_birds_in_USA.csv'))
library(knitr)
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning =FALSE)
library(here)
library(tidyverse)
birds_ebird <- read_csv(paste0(here(), '/data_ebird/all-stats-regional-2021.csv'))
birds_pnas <- read_csv(paste0(here(), '/data_ebird/pnas.2023170118.sd01.csv'))
bird_e1 <- read_tsv(paste0(here(), '/e1_party-quiz/bird_key.tsv'))
birds_in_USA <- birds_ebird %>%
filter(region_code == "USA") %>%
mutate(normalized_sci_name = tolower(str_remove(scientific_name, " "))) %>%
select(common_name, species_code, normalized_sci_name, abundance_mean, season_name) %>%
group_by(species_code) %>%
summarize(first_abundance = first(abundance_mean), sum_abundance_mean = sum(abundance_mean, na.rm = TRUE), normalized_sci_name = first(normalized_sci_name), common_name = first(common_name), year_present = any(season_name == "year_round")) %>%
ungroup()
birds_merge <- birds_pnas %>%
mutate(normalized_sci_name = tolower(str_remove(`Scientific name`, " "))) %>%
left_join(birds_in_USA)
birds_prevalence_USA <- birds_merge %>%
filter(!is.na(species_code)) %>%
select("Common name", "Order", "Family", "Abundance estimate", "Scientific name", "normalized_sci_name", "species_code", "sum_abundance_mean") %>%
rename(common_name = `Common name`,
scientific_name = `Scientific name`,
order = Order,
family = Family,
abundance_estimate_pnas = `Abundance estimate`,
abundance_estimate_ebird = sum_abundance_mean) %>%
arrange(desc(abundance_estimate_pnas)) %>%
mutate(rank_overall = row_number()) %>%
group_by(order) %>%
mutate(rank_in_order = row_number()) %>%
ungroup() %>%
group_by(family) %>%
mutate(rank_in_family = row_number()) %>%
ungroup()
#Nonsense lives here!
birds_prevalence_USA <- birds_prevalence_USA %>%
mutate(not_in_usa = abundance_estimate_ebird < 0.0045) %>%
mutate(top_5_in_order = rank_in_order <=5) %>%
mutate(top_100_birds = rank_overall <=100)
#mutate(large_cluster_tail = ((rank_in_order >= 30) | (rank_in_family >=5))) %>%
#mutate(rare_but_common_by_family = ((large_cluster_tail & (rank_in_family <= 2)))) %>%
#mutate(rare_but_common_by_order = ((large_cluster_tail & (rank_in_order <= 2)))) %>%
#mutate(too_many_sparrows = large_cluster_tail & !rare_but_common_by_order & !rare_but_common_by_family) %>%
#mutate(rare_on_both = (abundance_estimate_ebird < median(abundance_estimate_ebird)) & (abundance_estimate_pnas < median(abundance_estimate_pnas)))
#View(filter(birds_prevalence_USA, too_many_sparrows))
common_birds <- birds_prevalence_USA %>%
arrange(rank_overall) %>%
filter(!not_in_usa)%>%
filter(top_100_birds | top_5_in_order)
#View(common_birds)
write_csv(common_birds, paste0(here(), '/data_ebird/common_birds_in_USA.csv'))
setwd("~/Repositories/mekline-datadrivencv")
papers <- read.csv(paste0(here::here(), 'published_papers.csv'))
help(cr_cn)
??cr_cn
knitr::opts_chunk$set(
results='asis',
echo = FALSE
)
library(tidyverse)
library(rcrossref)
library(here)
papers <- read.csv(paste0(here::here(), '/published_papers.csv'))
cr_cn(papers$doi, style = APA)
papers <- read.csv(paste0(here::here(), '/published_papers.csv')) %>%
mutate(cr_cn = cr_cn(doi, stype = "apa"))
papers <- read.csv(paste0(here::here(), '/published_papers.csv')) %>%
mutate(cr_cn = cr_cn(doi, stype = "apa"))
paper_data <- cr_cn(papers$doi, style = APA)
papers <- read.csv(paste0(here::here(), '/published_papers.csv')) %>%
mutate(cr_cn = cr_cn(doi, stype = "apa"))
paper_data <- cr_cn(papers$doi, style = APA)
papers$cr_cn
papers <- read.csv(paste0(here::here(), '/published_papers.csv')) %>%
mutate(cr_cn = cr_cn(doi, style = "apa"))
papers$cr_cn
papers <- read.csv(paste0(here::here(), '/published_papers.csv')) %>%
mutate(cr_cn = cr_cn(doi, format = text, style = "apa"))
papers <- read.csv(paste0(here::here(), '/published_papers.csv')) %>%
mutate(cr_cn = cr_cn(doi, format = 'text', style = "apa"))
papers(cr_cn())
papers$cr_cn
papers <- read.csv(paste0(here::here(), '/published_papers.csv')) %>%
mutate(cr_cn = unlist(cr_cn(doi, format = 'text', style = "apa")))
papers$cr_cn
papers$doi
devtools::install_github("ropensci/rcrossref")
setwd("~/Repositories/mekline-datadrivencv")
names(entries)
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
library(vitae)
library(tidyverse)
library(rcrossref)
library(here)
entries <- read.csv(paste0(here::here(), '/entries.csv'))
names(entries)
# library(tibble)
# tribble(
#   ~ Degree, ~ Year, ~ Institution, ~ Where,
#   "Informal studies", "1889-91", "Flying University", "Warsaw, Poland",
#   "Master of Physics", "1893", "Sorbonne Université", "Paris, France",
#   "Master of Mathematics", "1894", "Sorbonne Université", "Paris, France"
# ) %>%
education <- filter(entries, section == "education")
View(education)
help(detailed_desc)
??detailed_description
??detailed_entries
# library(tibble)
# tribble(
#   ~ Degree, ~ Year, ~ Institution, ~ Where,
#   "Informal studies", "1889-91", "Flying University", "Warsaw, Poland",
#   "Master of Physics", "1893", "Sorbonne Université", "Paris, France",
#   "Master of Mathematics", "1894", "Sorbonne Université", "Paris, France"
# ) %>%
education <- filter(entries, section == "education") %>%
arrange(end) %>%
mutate(year_span = paste0(start, "-", end))
detailed_entries(what = title, when = year_span, with = institution)
# library(tibble)
# tribble(
#   ~ Degree, ~ Year, ~ Institution, ~ Where,
#   "Informal studies", "1889-91", "Flying University", "Warsaw, Poland",
#   "Master of Physics", "1893", "Sorbonne Université", "Paris, France",
#   "Master of Mathematics", "1894", "Sorbonne Université", "Paris, France"
# ) %>%
education <- filter(entries, section == "education") %>%
arrange(end) %>%
mutate(year_span = paste0(start, "-", end))
detailed_entries(education, what = title, when = year_span, with = institution)
help(write_bib)
help(bibliographic_entries)
??bibliography_entries
library(dplyr)
knitr::write_bib(c("vitae", "tibble"), "packages.bib")
bibliography_entries("packages.bib") %>%
arrange(desc(author$family), issued)
help(glue)
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, include = FALSE)
library(tidyverse)
library(rcrossref)
library(glue)
library(here)
papers <- read.csv(paste0(here::here(), '/published_papers.csv')) %>%
mutate(cr_cn = unlist(cr_cn(doi, format = 'text', style = "apa")))
entries <- read.csv(paste0(here::here(), '/entries.csv'))
papers <- read.csv(paste0(here::here(), '/published_papers.csv')) %>%
mutate(cr_cn = unlist(cr_cn(doi, format = 'text', style = "apa"))) %>%
mutate(cr_cn2 = cr_cn(doi))
)
papers <- read.csv(paste0(here::here(), '/published_papers.csv')) %>%
#mutate(cr_cn = unlist(cr_cn(doi, format = 'text', style = "apa"))) %>%
mutate(cr_cn2 = cr_cn(doi))
)
papers <- read.csv(paste0(here::here(), '/published_papers.csv')) %>%
mutate(cr_cn2 = cr_cn(doi))
View(papers)
help("cr_cn")
help(cr_cn)
help(cr_cn)
setwd("~/Repositories/mekline-datadrivencv")
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, include = FALSE)
library(tidyverse)
library(rcrossref)
library(glue)
library(here)
papers <- read.csv(paste0(here::here(), '/published_papers.csv')) %>%
#mutate(cr_cn = unlist(cr_cn(doi, format = 'text', style = "apa"))) %>%
mutate(cr_cn2 = cr_cn(doi))
entries <- read.csv(paste0(here::here(), '/entries.csv'))
help("cr_cn")
names(entries)
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, include = FALSE)
library(tidyverse)
library(rcrossref)
library(glue)
library(here)
papers <- read.csv(paste0(here::here(), '/published_papers.csv')) %>%
mutate(cr_cn = unlist(cr_cn(doi, format = 'text', style = "apa"))) %>%
mutate(cr_cn2 = cr_cn(doi))
entries <- read.csv(paste0(here::here(), '/entries.csv'))
names(entries)
View(entries)
knitr::opts_chunk$set(results='asis', echo = FALSE, warning = FALSE, message = FALSE)
library(tidyverse)
library(rcrossref)
library(glue)
library(here)
papers <- read.csv(paste0(here::here(), '/published_papers.csv')) %>%
mutate(citation_text = unlist(cr_cn(doi, format = 'text', style = "apa"))) %>%
mutate(citation_year = str_extract("(20|19)[0-9]{2})"))
papers <- read.csv(paste0(here::here(), '/published_papers.csv')) %>%
mutate(citation_text = unlist(cr_cn(doi, format = 'text', style = "apa"))) %>%
mutate(citation_year = str_extract(citation_text, "(20|19)[0-9]{2})"))
papers <- read.csv(paste0(here::here(), '/published_papers.csv')) %>%
mutate(citation_text = unlist(cr_cn(doi, format = 'text', style = "apa"))) %>%
mutate(citation_year = str_extract(citation_text, "(20|19)[0-9]{2}"))
entries <- read.csv(paste0(here::here(), '/entries.csv')) %>%
mutate(across(where(is.character), ~na_if(., "")))
papers$citation_year
filter(papers, section == "papers")
papers <- read.csv(paste0(here::here(), '/published_papers.csv')) %>%
mutate(citation_text = unlist(cr_cn(doi, format = 'text', style = "apa"))) %>%
mutate(citation_year = str_extract(citation_text, "(20|19)[0-9]{2}")) %>%
mutate(section_id = "papers")
entries <- read.csv(paste0(here::here(), '/entries.csv')) %>%
mutate(across(where(is.character), ~na_if(., "")))
filter(papers, section == "papers")
filter(papers, section_id == "papers")
papers %>%
unite(
starts_with('description'),
col = "description_bullets",
sep = "\n- ",
na.rm = TRUE
)
papers <- read.csv(paste0(here::here(), '/published_papers.csv')) %>%
mutate(citation_text = as.character(unlist(cr_cn(doi, format = 'text', style = "apa"))))
papers$citation_text
is.character(papers$citation_text)
